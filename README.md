# UniqCounter
Second task for intershipVk
## Задание
Необходимо написать алгоритм, который приблизительно подсчитывает количество различных чисел в массиве, используя константный объём памяти. 

Более формально, надо реализовать класс с двумя функциями:

* `void add(int x);` — добавить число x к набору;
* `int get_uniq_num();` — возвращает приблизительное количество различных чисел, которые были переданы в функцию `add`.

Ваш класс должен использовать не более 32 Кб памяти.
## Алгоритм

Заведем массив пар _ranges_, в котором будем хранить интервалы, которым принадлежат входные данные. Колличество элементов в массиве ограничено свехру выделенной памятью.

    входные данные: 2 3 8 5 10 12 4 11
    ranges: {2,5} {8,8} {10,12}
    
Когда надо добавить число в набор, либо добавляем его уже к существующему интервалу (объединяя соседние интервалы, если данное число было единственным между ними), либо добавляем число как отдельный интервал, если приписывать было не к чему.

Если надо добавить элемент как отдельный интервал, но выделенная память закончилась, находим два ближайших друг к другу интервала (с учетом добавляемого числа) и объединяем их в один, после чего добавляем новый интервал. Разницу между слитыми интервалами добавим к переменной `error` — отвечает за количество "ошибочно" добавленных элементов в массив.

Если добавляемый элемент уже есть в массиве, то он будет ошибочным с вероятность `error / covered`, где `covered` — сумма всех интервалов в массиве. Пересчитаем значение ошибки с учетом этого.

<<<<<<< HEAD
Ответ будет равнятся `covered - error`.
=======
Ответ будет `covered - error`.
>>>>>>> 4a3d5c97ef3d64e492dc35e898f1ecfd4a9be531
